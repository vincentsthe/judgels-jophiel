@(page: org.iatoki.judgels.commons.Page[org.iatoki.judgels.jophiel.commons.UserActivity], orderBy: String, orderDir: String, filterString: String, form: Form[org.iatoki.judgels.jophiel.UserActivityFilterForm])

@import org.iatoki.judgels.jophiel.controllers.routes

@import play.i18n.Messages
@import org.iatoki.judgels.commons.views.html.table.tableView
@import org.iatoki.judgels.commons.views.html.table.tableHeadersView
@import org.iatoki.judgels.commons.JudgelsUtils
@import org.iatoki.judgels.commons.views.html.table.paginationView
@import org.iatoki.judgels.commons.views.html.formErrorView

@implicitFieldConstructor = @{ b3.horizontal.fieldConstructor("", "") }

@formErrorView(form)

@b3.form(org.iatoki.judgels.jophiel.controllers.routes.UserActivityController.listUsersActivities(page.getPageIndex, orderBy, orderDir, filterString), 'class -> "form form-inline pull-right") {

    <input type="hidden" name="orderBy" value="@orderBy"/>
    <input type="hidden" name="orderDir" value="@orderDir"/>
    @b3.text(form("clients"), '_label -> Messages.get("client.clients"), 'class -> "form-control client_multicomplete")
    @b3.text(form("users"), '_label -> Messages.get("user.users"), 'class -> "form-control user_multicomplete")
    @b3.text(form("filterString"), '_label -> Messages.get("commons.search"))

    @b3.submit('class -> "btn btn-primary") { @Messages.get("commons.filter") }
}

@listFunc(newPageIndex: scala.Long, newOrderBy: String, newOrderDir: String, newFilterString: String) = @{org.iatoki.judgels.jophiel.controllers.routes.UserActivityController.listUsersActivities(newPageIndex, newOrderBy, newOrderDir, newFilterString)}

<div class="clearfix"></div>

@tableView() {
    @tableHeadersView(page.getPageIndex, orderBy, orderDir, filterString, listFunc)(
        "time" -> Messages.get("user.activity.time"),
        "userCreate" -> Messages.get("user.username"),
        "clientJid" -> Messages.get("client.name"),
        "log" -> Messages.get("user.activity.log")
    )

    <tbody>
        @for(userActivity <- page.getData) {
            <tr>
                <td>@JudgelsUtils.formatDetailedDate(userActivity.getTime)</td>
                <td>@userActivity.getUsername</td>
                <td>@userActivity.getClientName</td>
                <td>@Html(userActivity.getLog)</td>
                <td class="text-center">
                </td>
            </tr>
        }
    </tbody>
}

@paginationView(page, orderBy, orderDir, filterString, listFunc)

<script type="text/javascript">
    var clientAutoCompleteUrl = "@org.iatoki.judgels.jophiel.controllers.apis.routes.ClientAPIController.clientAutoCompleteList()";
    var userAutoCompleteUrl = "@org.iatoki.judgels.jophiel.controllers.apis.routes.UserAPIController.userAutoCompleteList()";
</script>
<script type="text/javascript" src="@controllers.routes.Assets.versioned("javascripts/clientAndUserMultiComplete.js")"></script>